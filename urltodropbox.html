<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Save web file, URL to Dropbox</title>
<meta name="description" content="You can save any file from the Internet directly to your Dropbox without downloading them to the computer. It allow you to save web files to Dropbox folder directly.">
<meta name="keywords" content="url to dropbox, web file to dropbox, internet url to dropbox, save to dropbox, dropbox file transfer, upload to dropbox">
<meta property="og:title" content="Save web file, URL to Dropbox"> 
<meta property="og:description" content="You can save any file from the Internet directly to your Dropbox without downloading them to the computer. It allow you to save web files to Dropbox folder directly.">
<meta property="og:type" content="website">
<meta property="og:url" content="/">
<meta property="og:image" content="http://urltodropbox.softgateon.net/img/logo128.png">

<link rel="shortcut icon" href="http://urltodropbox.softgateon.net/favicon2.ico">
<head>
<style>
body,table,td,span,select,input,textarea{
	font-size:14px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
}
button{
	font-size:14px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
}

body{
	background:#E9EAED;
}

A:link    {color:#0860A8;text-decoration:none;}
A:visited {color:#0860A8;text-decoration:none;}
A:active  {color:#0860A8;text-decoration:underline;}
A:hover  {color:#0860A8;text-decoration:underline;}

.divopt{
	-webkit-box-shadow: 0 0 10px #999;
	-moz-box-shadow: 0 0 10px #999;
	box-shadow: 0 0 10px #999;
}
.menulink{
	font-size:15px;
}
.input{
	width:630px;
}
.small{
	font-size:13px;
}
</style>

<script src="http://urltodropbox.softgateon.net/js/common.js" type="text/javascript"></script>

<script>
function setstorage(name,value){
	if (window.localStorage){
		localStorage[name]=value+'';
	}else{
		//setCookie(name, value, 1000*60*60*24*365*10); 
	}
}
function getstorage(name){
	var s;
	if (window.localStorage){
		s=localStorage[name];
	}else{
		//s=getCookie(name);
	}
	return s;
}

function init(){
	window.onunload=function(){
		//proc_saveopt();
	}	
}
</script>
</head>
<body onload="init()">

<table align=center>
<tr><td height=10>
</table>

<table id="maintable" width=810 border=0 align=center class="divopt" style="background-color:white;padding:6px 6px 6px 6px;border: 0px solid #2E79DB;">
<tr><td>
<center>
<script type="text/javascript">
    google_ad_client = "ca-pub-1113541014872557";
    google_ad_slot = "5752412305";
    google_ad_width = 728;
    google_ad_height = 15;
</script>
<script type="text/javascript"
src="//pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</center>

<table width=100%><tr>
<td><img src="http://urltodropbox.softgateon.net/img/logo65.png" width=65>
<td>
<td><a id="toptitle" href="./" title="Go Home" style="color:#1667A0"><span style="font-size:27px;font-family:Verdana, Arial;white-space:nowrap;">Save web file, URL to Dropbox</span></a>
<div style="margin-left:2px;margin-top:3px">
You can save any file from the Internet directly to your Dropbox without downloading them to the computer.
It allow you to save web files to Dropbox folder directly. You don't need to install any further software, extension.<br>
<font style="color:green">Note:</font> You can save up to 100 files at a time.
Enter the URLs below. One URL per line. Supports HTTP and HTTPS URLs (Public internet URL that anyone can access).<br>
If you want to enter a filename to save, separate by comma.<br>
<font style="color:green">Ex) {url} or {filename},{url}</font><br>
http://www.sample.com/sample.png<br>
mysample.png,http://www.sample.com/sample.png<br>
</div>
</table>

<center>
<script type="text/javascript">
    google_ad_client = "ca-pub-1113541014872557";
    google_ad_slot = "4275679106";
    google_ad_width = 728;
    google_ad_height = 90;
</script>
<script type="text/javascript"
src="//pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</center>

<tr><td>
<script>
function get_data(){
	var s=getstorage("c_filedata4");
	if (!s) s="[]";
	var a=[];
	try{
		a=JSON.parse(s);
	}catch(err){
		a=[];
	}
	if(!a) a=[];
	return a;
}

function proc_savetohistory(){
	var subject=getstorage('c_lastsubject') || '';
	subject=prompt("Please enter a title or name.",subject);	
	if(!subject){
		return;
	}
	setstorage('c_lastsubject',subject);
	var b={};
	b.id=(new Date()).getTime();
	b.subject=subject;
	b.files=trim(_getid('urls').value);

	var a=get_data();
	a.push(b);
	if(a.length>15) a.splice(0,1);
	if(window.JSON) setstorage("c_filedata4",JSON.stringify(a));		
	
	proc_displayhistory();
	var obj=_getid('history');
	if(obj.options.length>=2) obj.selectedIndex=1;
}
function proc_displayhistory(){
	var obj=_getid('history');
	var a=get_data();
	
	for(var i=obj.options.length-1;i>=0;i--) obj.remove(i);
	var c=document.createElement("option");
	c.value='';
	c.appendChild(document.createTextNode('*URL History'));		         
	obj.appendChild(c);		

	var s;
	for(var i=a.length-1;i>=0;i--){
		var c=document.createElement("option");
		c.value=a[i].id;		
		s=a[i].subject+' ('+datetimetostring(a[i].id)+')';
		c.appendChild(document.createTextNode(s));		         
		obj.appendChild(c);		
	}
}

function proc_historychange(){
	var obj=_getid('history');
	if(!obj.value)return;
	var a=get_data();
	for(i = 0; i < a.length; i++){
		if(a[i].id==obj.value){
			if(a[i].files){
				_getid('urls').value=a[i].files;
			}
			break;
		}
	}
}
function proc_deletehistory(){
	var obj=_getid('history');
	if(!obj.value)return;
	var a=get_data();
	for(i = 0; i < a.length; i++){
		if(a[i].id==obj.value){
			a.splice(i,1);
			if(window.JSON) setstorage("c_filedata4",JSON.stringify(a));
			var idx=obj.selectedIndex;
			obj.remove(idx);
			if(idx>obj.options.length-1) idx=obj.options.length-1;
			obj.selectedIndex=idx;
			break;
		}
	}
}
function proc_clearhistory(){
	for(i = 1; i <= 2; i++){
		var answer=confirm("All stored history will be deleted. ["+i+"/2]"+"\n\n"+"Are you sure?");				
		if(!answer) return;
	}
	setstorage("c_filedata4","[]");
	var obj=_getid('history');
	for(var i=obj.options.length-1;i>=1;i--) obj.remove(i);
}

function proc_saveopt(){
	var b=[];
	var c;
	var obj=_getid("optcontainer");
	var a=obj.getElementsByTagName('INPUT');
	for(var i = 0; i < a.length; i++){    
		if(a[i].type=='checkbox'){
			c={};
			c.name=a[i].name;
			c.type=a[i].type;
			c.checked=a[i].checked;
			b.push(c);
		}else if(a[i].type=='text'){
			c={};
			c.name=a[i].name;
			c.type=a[i].type;
			c.value=a[i].value || '';
			b.push(c);
		}
	}
	var a=obj.getElementsByTagName('SELECT');
	for(var i = 0; i < a.length; i++){    
		if(a[i].form && a[i].form.name){
			c={};
			c.name=a[i].name;
			c.type='select';
			c.value=a[i].value || '';
			b.push(c);
		}
	}

	if(window.JSON) setstorage('c_opt',JSON.stringify(b));
}
function proc_loadopt(){
	var s=getstorage('c_opt');
	var b=[];
	try{
		b=JSON.parse(s);
	}catch(err){
		b=[];
	}
	if(!b) b=[];

	var c;
	for(var i = 0; i < b.length; i++){    
		if(b[i].type=='checkbox'){
			c=document.optcontainer[b[i].name];
			if(c) c.checked=b[i].checked;
		}else if(b[i].type=='select' || b[i].type=='text'){
			c=document.optcontainer[b[i].name];
			if(c) c.value=b[i].value;
		}
	}
	var a=_getid("optcontainer").getElementsByTagName('*');
	for(var i = 0; i < a.length; i++){    
		if(a[i].tagName=='SELECT'){
			a[i].onchange=proc_saveopt;
		}else if(a[i].type=='checkbox'){
			if(a[i].name=='o_remove'){
				a[i].onclick=function(){
					proc_saveopt();
				}				
			}else{
				a[i].onclick=proc_saveopt;
			}
		}
	}
}

function proc_show(name){
	var a=_getid(name);
	if(!a)return;
	if(a.style.display=='') a.style.display='none';
	else a.style.display='';
}
</script>

<style>
.uploaded{color:green;}
.error{color:#8A0808;}
.welcome{color:#45616D;}
.bold1{color:green;}
.log{
	width:100%;height:170px;
}
.big1{
	font-size:20px;
}
#logtab a{
	font-size:14px;
}
#gd_progress{
	width:650px;white-space:nowrap;overflow:hidden;border:0px solid red;
}
</style>
	<table width=100%>					
		<tr><td>
			<textarea id='urls' style="width:100%;height:240px" spellcheck=false wrap="off" placeholder="Enter the URLs here. One URL per line. Supports HTTP and HTTPS URLs."></textarea>

		<tr><td>			
			<table align=center>
<td><button type=button onclick="proc_savetohistory()">Save this URLs</button>
<td><select id='history' onchange="proc_historychange()" style="width:300px"></select>
<td><button type=button onclick="proc_historychange()" title="Select"><img src="http://urltodropbox.softgateon.net/images/commit.png"></button>
<td><button type=button onclick="proc_deletehistory()" title="Delete"><img src="http://urltodropbox.softgateon.net/images/close.png"></button>
			<td><button type=button onclick="proc_clearhistory()">Clear all</button>
			</table>

		<tr><td align=center>
<button type=button id="btn_ok" onclick="attach_saveall()" class="big1"><img src="http://urltodropbox.softgateon.net/images/dropbox2.png" width=18 align="absmiddle"> Save to Dropbox</button>
		<tr><td>
			<div id="downlink2" style="margin-bottom:2px"></div>
			<div id="log4" class="log" style="overflow-y:scroll;"></div>			
	</table>

<tr><td>
<tr><td align=center>
<script type="text/javascript">
    google_ad_client = "ca-pub-1113541014872557";
    google_ad_slot = "4275679106";
    google_ad_width = 728;
    google_ad_height = 90;
</script>
<script type="text/javascript"
src="//pagead2.googlesyndication.com/pagead/show_ads.js">
</script>

</table>

<script>
var ischrome=false;
if (navigator.userAgent.indexOf("Chrome")>=0) ischrome=true;

function init_load(){
	proc_displayhistory();
	//proc_loadopt();
	var sw=_getid('urls').offsetWidth;
	for(var i = 1; i <= 7; i++){
		var a=_getid("log"+i);
		if(a){
			if(ischrome) a.setAttribute("readonly", "true");
			a.setAttribute("spellcheck", "false");
			a.setAttribute("wrap", "off");
			a.style.width=sw+'px';
		}
	}
}
init_load();
</script>

<style>
a.bottomlink:link{text-decoration:underline;}
a.bottomlink:visited{text-decoration:underline;}
a.bottomlink:active{text-decoration:underline;}
a.bottomlink:hover{text-decoration:underline;}
</style>
<table id="bottomtable" align=center>
<tr><td height=7>
<tr><td align=center><span id="bottomtitle">ⓒ Save web file, URL to Dropbox, 2016</span></table><br>
<script type="text/javascript" src="https://www.dropbox.com/static/api/2/dropins.js" id="dropboxjs" data-app-key="ih8glryp4pottom"></script>
<style>
.gd_div{background-color:#FFFFE1;position:absolute;overflow:hidden;-webkit-box-shadow: 0 0 25px #999;-moz-box-shadow: 0 0 25px #999;box-shadow: 0 0 25px #999;}
</style>
<div id="layer_message" class="gd_div" style="z-index:10001;display:none;"></div>
<script>
var gd_picker,gd_loaded,gd_pickerloaded,gd_lastprogress,gd_issupported,gd_isdownloading,gd_load_timer,gd_bloburl,gd_state2;
var ismsie=false;
if(navigator.appName!="Netscape"){
	if(navigator.userAgent.indexOf("MSIE")>=0) ismsie=true;
}

function attach_saveall(){
	if(!Dropbox){
		alert('Not loaded Dropbox library. Please try again in a few minutes.');
		return;
	}
	if(Dropbox.isBrowserSupported && !Dropbox.isBrowserSupported()){
		alert("Your browser does not support the Dropbox. Please upgrade your browser.");		
		return;
	}
	attach_saveall2();
}

var g_logcount=0;
function _log(name,s,state,nohenc){
function proc_log(s){
	var obj=_getid(name);
	/*if(obj.style.display!='') obj.style.display='';
	if(g_logcount>200){
		g_logcount=0;
		obj.innerHTML='';
	}*/
	var a=document.createElement("div");
	a.setAttribute('style','display:block');
	if(!state) state='';
	if(!nohenc) s=henc(s);
	a.innerHTML='<font class="'+state+'">'+s+'</font>';
	obj.appendChild(a);  
	obj.scrollTop=obj.scrollHeight;
	g_logcount++;
}
	if(name=='log4' || name=='log5'){
		proc_log(s);
		return;
	}
	var a=_getid(name);
	var s1=a.value;
	if(s1) s1+='\n';
	a.value=s1+s;
	a.scrollTop=a.scrollHeight;
}

var gprogresstimer,gstarttime,gtotalsize;
function proc_complete(){
	clearInterval(gprogresstimer);
	gprogresstimer=null;
	gd_isdownloading=false;
	_getid('btn_ok').disabled=false;
	_getid("downlink2").innerHTML='';
}

var goptions = {
    files: [],
    success: function () {
		proc_complete();
		_log("log4",'Success! All Files saved to your Dropbox. <a href="https://www.dropbox.com/home" target="_blank">Visit Dropbox Home</a>','uploaded',true);		

    },
    progress: function (progress) {
		if(!gprogresstimer){
			gstarttime=(new Date()).getTime();
			gprogresstimer=setInterval(function(){
				var a=_getid('spanprogress');
				if(a){
					var s=(new Date()).getTime()-gstarttime;
					s=parseInt(s/1000);
					var min=Math.floor(s/60);
					var sec=parseInt(s % 60);					
					a.innerHTML='('+fillnumber(min)+':'+fillnumber(sec)+')';
				}
			},1000);
		}	
		var per=0;
		if(progress==0 && gstarttime>0 && gtotalsize){
			var totsec=parseInt(gtotalsize/(3.7*1024*1024));
			var elasec=(new Date()).getTime()-gstarttime;
			elasec=parseInt(elasec/1000);
			per=parseInt(elasec*100/totsec);	
			if(isNaN(per))per=0;
			if(per>95)per=0;
		}else{
			per=progress*100;
		}
		var a=_getid("gd_progress2");
		if(a){
			var s='Saving to Dropbox... ';
			if(per>0){
				s+=per+ '%';
				if(progress==0 && gstarttime>0) s+=' (estimates)';
			}
			a.innerHTML=s;
		}
	},
    cancel: function () {
		proc_complete();
		_log("log4",'Canceled by user.','error');
	},
    error: function (errorMessage) {
		proc_complete();
		var s=errorMessage || '';
		s=s.replace(/\\u([0-9a-f]{4})/g, function (whole, group1){
			return String.fromCharCode(parseInt(group1, 16));
		});
		s=s.replace(/\\(.)/mg, "$1");
		_log("log4",'Error: '+s,'error');
	}
}

function attach_saveall2(){
	if(gd_isdownloading){
		alert("It's working... Please try again in a few minutes.");
		return;
	}

	var s=trim(_getid('urls').value);
	var files=s.split('\n');
	if(!s || files.length==0){
		alert('No entered URLs.');
		return;
	}

	var o_rm_invalid=true;
	_getid('log4').innerHTML='';
	_log("log4",'Started..','welcome');

	goptions.files=[];
	gtotalsize=0;

			var arr,p1,url,filename,sdata,iserror;
			for(var i = 0; i <= files.length-1; i++){
				if(!files[i])continue;
				sdata='<font color=black>'+henc(shortstring(files[i],200))+'</font>';
				url='';
				filename='';
				arr=files[i].toLowerCase().split(',http');
				if(arr.length>2){
					_log("log4",'Separate comma error for filename. '+sdata,'error',true);
					iserror=true;continue;
				}
				if(arr.length==2){
					p1=files[i].toLowerCase().indexOf(',http');
					filename=files[i].substr(0,p1);
					url=files[i].substr(p1+1,files[i].length);
				}else{
					url=files[i];
					filename=getFileName(url);
				}
				url=trim(url);
				filename=trim(filename);

				if(!url){
					_log("log4",'Error. Can not find a Download URL. '+sdata,'error',true);
					iserror=true;continue;
				}
				if(!validateURL(url)){
					_log("log4",'Error. It is not a valid URL. '+sdata,'error',true);
					iserror=true;continue;
				}
				var a={};
				a.url=url;
				a.filename=filename;
				if(o_rm_invalid) a.filename=a.filename.replace(/[\\\\/:?*\"|]/g,'-');
				goptions.files.push(a);

				if(goptions.files.length>100){
					var s='Error. You can specify up to 100 files.';
					_log("log4",s,'error');
					proc_complete();
					alert(s);
					return;
				}
			}
	
	if(iserror){
		proc_complete();
		return;
	}
	if(goptions.files.length==0){
		var s='No entered URLs.';
		_log("log4",s,'error');
		proc_complete();
		alert(s);
		return;
	}
	
	_getid('btn_ok').disabled=true;
	_getid("downlink2").innerHTML="<table><tr><td><img id='gd_wait' src='http://urltodropbox.softgateon.net/images/wait.gif' align='absmiddle'><td><div id='gd_progress2'></div><td>&nbsp;<span id='spanprogress'></span></table>";	
	gd_isdownloading=true;
	clearInterval(gprogresstimer);
	gprogresstimer=null;
	Dropbox.save(goptions);
}
</script>

</body>
</html>
